
Running 180 tests using 4 workers

  -  1 [Desktop Chrome] › e2e/app.critical-flow.spec.ts:5:6 › should start quiz and focus first option
  ✓  4 [Desktop Chrome] › e2e/all-interactive-aria-accessibility.spec.ts:19:5 › All Interactive Elements: ARIA and Keyboard Accessibility › All interactive elements on / have accessible names and ARIA roles (1.5s)
  ✓  6 [Desktop Chrome] › e2e/all-interactive-aria-accessibility.spec.ts:19:5 › All Interactive Elements: ARIA and Keyboard Accessibility › All interactive elements on /quiz have accessible names and ARIA roles (778ms)
  ✓  7 [Desktop Chrome] › e2e/all-interactive-aria-accessibility.spec.ts:19:5 › All Interactive Elements: ARIA and Keyboard Accessibility › All interactive elements on /achievements have accessible names and ARIA roles (736ms)
  ✓  5 [Desktop Chrome] › e2e/app.spec.ts:3:1 › should reset quiz and focus first option after restart (3.6s)
  ✓  8 [Desktop Chrome] › e2e/all-interactive-aria-accessibility.spec.ts:19:5 › All Interactive Elements: ARIA and Keyboard Accessibility › All interactive elements on /analytics have accessible names and ARIA roles (625ms)
  ✓  9 [Desktop Chrome] › e2e/app.spec.ts:21:1 › should handle edge case: no questions (710ms)
  ✓  3 [Desktop Chrome] › e2e/aria-roles-labels.spec.ts:31:3 › Accessibility: ARIA roles and labels › Main navigation and buttons have correct ARIA roles and labels (4.4s)
  ✓  10 [Desktop Chrome] › e2e/all-interactive-aria-accessibility.spec.ts:19:5 › All Interactive Elements: ARIA and Keyboard Accessibility › All interactive elements on /profile have accessible names and ARIA roles (802ms)
  ✓  13 [Desktop Chrome] › e2e/assets-case-sensitivity.spec.ts:11:1 › Badge image is served by Vite dev server (case-sensitive) (40ms)
  ✓  14 [Desktop Chrome] › e2e/assets-case-sensitivity.spec.ts:17:1 › No case-different files in public/badges/ (5ms)
  -  15 [Desktop Chrome] › e2e/assets-troubleshoot.spec.ts:10:8 › Development Asset Troubleshooting › Badge image is accessible directly
  ✓  2 [Desktop Chrome] › e2e/app-accessibility-full.spec.ts:45:3 › App Accessibility: Full Tab Order and ARIA Audit › Tab through all main pages and assert focus order/visibility (4.8s)
  ✓  16 [Desktop Chrome] › e2e/assets-troubleshoot.spec.ts:24:3 › Development Asset Troubleshooting › App icon is accessible directly (439ms)
  ✓  17 [Desktop Chrome] › e2e/app-accessibility-full.spec.ts:89:3 › App Accessibility: Full Tab Order and ARIA Audit › No missing or duplicate ARIA labels/roles on main interactive elements (614ms)
  ✓  18 [Desktop Chrome] › e2e/assets-troubleshoot.spec.ts:30:3 › Development Asset Troubleshooting › Achievements page renders badge containers and images (594ms)
  ✓  12 [Desktop Chrome] › e2e/aria-roles-labels.spec.ts:71:3 › Accessibility: ARIA roles and labels › Keyboard navigation: Tab through all interactive elements and ensure correct focus order (1.4s)
  ✓  20 [Desktop Chrome] › e2e/assets-troubleshoot.spec.ts:45:3 › Development Asset Troubleshooting › badges.json is accessible and returns valid JSON (413ms)
PAGE CONTENT AFTER LOGIN: <!DOCTYPE html><html lang="en"><head>
  <script type="module">import { injectIntoGlobalHook } from "/@react-refresh";
injectIntoGlobalHook(window);
window.$RefreshReg$ = () => {};
window.$RefreshSig$ = () => (type) => type;</script>

  <script type="module" src="/@vite/client"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Massage Therapy Smart Study PRO</title>
  <link rel="icon" type="image/x-icon" href="/Massage-Therapy-FIREBASE-PRO/favicon.ico">
  <link rel="apple-touch-icon" href="/Massage-Therapy-FIREBASE-PRO/icon-512x512.png">
  <meta name="theme-color" content="#1e3c28">
  <script type="module" src="/src/index.tsx"></script>
<style type="text/css" data-vite-dev-id="/Users/macuser/Desktop/Massage-Therapy-FIREBASE-PRO/src/components/AppHeader.css">.app-header {
  display: flex;
  align-items: center;
  gap: 1.2rem;
  padding: 1.5rem 0 1rem 0;
  justify-content: center;
}
.app-header__icon {
  width: 48px;
  he
BROWSER CONSOLE: log [E2E DEBUG] Profile user: _UserImpl
BROWSER CONSOLE: log [DEBUG] Loading user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3
BROWSER CONSOLE: warning [2025-06-29T21:51:46.108Z]  @firebase/firestore: Firestore (11.9.0): WebChannelConnection RPC 'Listen' stream 0x1ad4b291 transport errored. Name: undefined Message: undefined
BROWSER CONSOLE: error [2025-06-29T21:51:46.110Z]  @firebase/firestore: Firestore (11.9.0): Could not reach Cloud Firestore backend. Connection failed 1 times. Most recent error: FirebaseError: [code=unavailable]: The operation could not be completed
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.
BROWSER CONSOLE: debug [vite] connecting...
BROWSER CONSOLE: debug [vite] connected.
BROWSER CONSOLE: info %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
BROWSER CONSOLE: log [DEBUG][Router] location.pathname: /profile basename: /
BROWSER CONSOLE: log [analytics] app_loaded undefined
  ✓  22 [Desktop Chrome] › e2e/auth.spec.ts:5:3 › Authentication UI Flows › should show sign-in prompt on Analytics when unauthenticated (633ms)
BROWSER CONSOLE: log [E2E DEBUG] Profile user: _UserImpl
BROWSER CONSOLE: log [DEBUG] Loading user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3
  ✓  19 [Desktop Chrome] › e2e/auth-session-persistence.spec.ts:18:3 › Auth Session Persistence › should persist session after reload (1.3s)
  ✓  21 [Desktop Chrome] › e2e/auth-smoke.spec.ts:4:1 › auth smoke: can sign in and see user info (1.3s)
  ✓  25 [Desktop Chrome] › e2e/badge-dynamic-behavior.spec.ts:5:1 › badges.json has correct criteria and image fields (28ms)
  ✓  11 [Desktop Chrome] › e2e/app.spec.ts:30:1 › should handle edge case: rapid answer selection (3.3s)
  ✓  26 [Desktop Chrome] › e2e/badge-dynamic-behavior.spec.ts:24:1 › badge_test image is visible and loads (656ms)
  ✓  24 [Desktop Chrome] › e2e/badge-appearance.spec.ts:13:2 › Local badge images (UI login) › All key badges appear on Achievements page (1.2s)
  ✓  23 [Desktop Chrome] › e2e/auth.spec.ts:10:3 › Authentication UI Flows › should show sign-in button and open popup on Profile page (1.6s)
  ✓  28 [Desktop Chrome] › e2e/basic-navigation.spec.ts:13:5 › Basic Navigation › can navigate to / (674ms)
  ✓  30 [Desktop Chrome] › e2e/auth.spec.ts:26:3 › Authentication UI Flows › should show sign-in button after sign out click (UI only) (579ms)
  ✓  31 [Desktop Chrome] › e2e/basic-navigation.spec.ts:13:5 › Basic Navigation › can navigate to /quiz (581ms)
  ✓  33 [Desktop Chrome] › e2e/basic-navigation.spec.ts:13:5 › Basic Navigation › can navigate to /analytics (587ms)
  ✓  34 [Desktop Chrome] › e2e/basic-navigation.spec.ts:13:5 › Basic Navigation › can navigate to /profile (511ms)
  ✓  27 [Desktop Chrome] › e2e/app.spec.ts:42:1 › should show explanations when enabled (2.8s)
  ✓  29 [Desktop Chrome] › e2e/critical-edge-accessibility.spec.ts:4:3 › Critical Quiz Edge Cases and Accessibility › Partial answers: finish quiz with unanswered questions (2.9s)
  -  37 [Desktop Chrome] › e2e/critical-edge-accessibility.spec.ts:22:8 › Critical Quiz Edge Cases and Accessibility › Network failure: loading questions
  ✓  32 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:4:3 › Critical UI and Accessibility Scenarios › Mobile viewport: quiz UI, results, and modals are visible and usable (3.5s)
  ✓  35 [Desktop Chrome] › e2e/edge-accessibility.spec.ts:4:3 › Quiz Edge Cases and Accessibility › Quiz with all options disabled: keyboard navigation skips disabled (2.8s)
  ✓  39 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:25:3 › Critical UI and Accessibility Scenarios › Badge modals: only one open at a time, keyboard accessible (781ms)
  ✓  36 [Desktop Chrome] › e2e/app.spec.ts:51:1 › should show topic stats in results (3.1s)
  ✓  41 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:45:3 › Critical UI and Accessibility Scenarios › Badge modal: open with keyboard only (Tab + Enter/Space) (634ms)
  ✓  38 [Desktop Chrome] › e2e/critical-edge-accessibility.spec.ts:35:3 › Critical Quiz Edge Cases and Accessibility › ARIA attributes: quiz options and navigation (3.1s)
  ✓  40 [Desktop Chrome] › e2e/edge-accessibility.spec.ts:21:3 › Quiz Edge Cases and Accessibility › Badge modal: opens and fallback image appears if missing (965ms)
  ✓  44 [Desktop Chrome] › e2e/critical-edge-accessibility.spec.ts:57:3 › Critical Quiz Edge Cases and Accessibility › Badges: tab, open with Enter/Space, close with Escape, focus returns (716ms)
  ✓  42 [Desktop Chrome] › e2e/app.spec.ts:63:1 › should render and be usable on mobile viewport (2.8s)
  ✓  47 [Desktop Chrome] › e2e/app.spec.ts:73:1 › should load all referenced badge images on Achievements page (554ms)
  ✓  46 [Desktop Chrome] › e2e/finish-quiz-buttons.spec.ts:4:3 › Finish and Finish Quiz Buttons › completes quiz and shows results with Finish button (2.7s)
  ✓  48 [Desktop Chrome] › e2e/app.spec.ts:91:1 › should show fallback badge image if badge image fails to load (667ms)
  -  50 [Desktop Chrome] › e2e/app.spec.ts:122:6 › should load favicon, app icon, and default avatar image
  ✓  51 [Desktop Chrome] › e2e/app.spec.ts:149:1 › should navigate to all main pages via NavBar and route correctly (1.2s)
  ✓  43 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:60:3 › Critical UI and Accessibility Scenarios › Next button: always rendered, but hidden or disabled as appropriate (5.3s)
  ✓  45 [Desktop Chrome] › e2e/edge-accessibility.spec.ts:40:3 › Quiz Edge Cases and Accessibility › Tab order: all interactive elements are reachable (5.8s)
  -  54 [Desktop Chrome] › e2e/edge-accessibility.spec.ts:55:8 › Quiz Edge Cases and Accessibility › Screen reader text: ARIA labels and roles
  ✓  49 [Desktop Chrome] › e2e/finish-quiz-buttons.spec.ts:19:3 › Finish and Finish Quiz Buttons › shows Finish Quiz button and works as expected (2.6s)
Number of topic options: [33m482[39m
  ✓  53 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:75:3 › Critical UI and Accessibility Scenarios › Quiz cannot be started without required fields (2.5s)
  ✓  52 [Desktop Chrome] › e2e/app.spec.ts:188:1 › should not submit answer when using arrow keys (only change selection) (3.3s)
  ✓  57 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:111:3 › Critical UI and Accessibility Scenarios › Badge modal fallback image and keyboard navigation (727ms)
  ✓  59 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:127:3 › Critical UI and Accessibility Scenarios › Network failure: badge load (525ms)
  ✓  56 [Desktop Chrome] › e2e/keyboard-navigation-and-restart.spec.ts:4:3 › Keyboard-Only Navigation and Quiz Restart › Complete a quiz using direct element selection/clicks (3.1s)
  ✓  55 [Desktop Chrome] › e2e/edge-accessibility.spec.ts:77:3 › Quiz Edge Cases and Accessibility › Mobile viewport: quiz, results, achievements (3.4s)
  ✓  62 [Desktop Chrome] › e2e/login-flow.spec.ts:5:3 › Sign In Flow (UI) › shows sign-in prompt when not authenticated (599ms)
  ✓  63 [Desktop Chrome] › e2e/login-flow.spec.ts:11:3 › Sign In Flow (UI) › signs in with test form and shows user profile (1.2s)
  ✓  58 [Desktop Chrome] › e2e/app.spec.ts:211:1 › arrow keys: wrap-around, skip disabled, and maintain selection state (3.7s)
  ✓  60 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:133:3 › Critical UI and Accessibility Scenarios › Accessibility: ARIA roles and labels (2.8s)
  -  66 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:156:8 › Critical UI and Accessibility Scenarios › Tab order is logical for quiz controls
  ✓  64 [Desktop Chrome] › e2e/login-flow.spec.ts:19:3 › Sign In Flow (UI) › signs out and returns to guest state (1.2s)
  ✓  61 [Desktop Chrome] › e2e/keyboard-navigation-and-restart.spec.ts:22:3 › Keyboard-Only Navigation and Quiz Restart › Quiz restart resets all state and focus (3.2s)

  ✘  69 [Desktop Chrome] › e2e/navigation-aria-flow.spec.ts:26:5 › Navigation and ARIA Accessibility Flow › Page / has correct ARIA roles and keyboard navigation (638ms)

  ✓  67 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:169:3 › Critical UI and Accessibility Scenarios › Mobile viewport: quiz and results are usable (3.0s)
  -  71 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:181:8 › Critical UI and Accessibility Scenarios › Quiz stepper: skip, revisit, answer in any order
  -  72 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:200:8 › Critical UI and Accessibility Scenarios › Error boundary: UI does not crash on JS error in quiz
  ✘  70 [Desktop Chrome] › e2e/navigation-aria-flow.spec.ts:26:5 › Navigation and ARIA Accessibility Flow › Page / has correct ARIA roles and keyboard navigation (retry #1) (608ms)
  ✓  65 [Desktop Chrome] › e2e/app.spec.ts:253:1 › up/down arrow keys only cycle focus on answer options, never advance quiz card (3.6s)
  ✓  73 [Desktop Chrome] › e2e/critical-ui-accessibility.spec.ts:207:3 › Critical UI and Accessibility Scenarios › Badge modal: top-right close button closes modal (710ms)
  -  75 [Desktop Chrome] › e2e/quiz-autosave-partial-results.spec.ts:6:8 › Quiz Auto-Save and Resume › Auto-saves progress for guest (localStorage) and resumes on reload
  -  76 [Desktop Chrome] › e2e/quiz-autosave-partial-results.spec.ts:26:8 › Quiz Auto-Save and Resume › Shows cancel/exit confirmation dialog when leaving quiz
  -  77 [Desktop Chrome] › e2e/quiz-autosave-partial-results.spec.ts:43:8 › Quiz Partial Results › Shows partial results and highlights unanswered questions
[browser][debug] [vite] connecting...
[browser][debug] [vite] connected.
[browser][info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[browser][log] [DEBUG][Router] location.pathname: /profile basename: /
[browser][log] [analytics] app_loaded undefined
[browser][log] [E2E DEBUG] Profile user: null
[browser][log] [E2E DEBUG] Profile user: _UserImpl
[browser][log] [DEBUG] Loading user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3
[browser][log] [DEBUG][userSettings] getUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {email: test1234@gmail.com, showExplanations: true, ariaSound: true, darkMode: false, haptic: false}
[browser][log] [DEBUG] Loaded settings: {email: test1234@gmail.com, showExplanations: true, ariaSound: true, darkMode: false, haptic: false}
[browser][log] [DEBUG] Saving user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: false, ariaSound: true, haptic: false, showExplanations: true}
[browser][log] [DEBUG][userSettings] setUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: false, ariaSound: true, haptic: false, showExplanations: true}
[browser][log] [DEBUG] Saving user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: true, ariaSound: true, haptic: false, showExplanations: true}
[browser][log] [DEBUG][userSettings] setUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: true, ariaSound: true, haptic: false, showExplanations: true}
[browser][debug] [vite] connecting...
[browser][debug] [vite] connected.
[browser][info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[browser][log] [DEBUG][Router] location.pathname: /profile basename: /
[browser][log] [analytics] app_loaded undefined
[browser][log] [E2E DEBUG] Profile user: _UserImpl
[browser][log] [DEBUG] Loading user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3
[browser][log] [DEBUG][userSettings] getUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {haptic: false, email: test1234@gmail.com, showExplanations: true, darkMode: true, ariaSound: true}
[browser][log] [DEBUG] Loaded settings: {haptic: false, email: test1234@gmail.com, showExplanations: true, darkMode: true, ariaSound: true}
[browser][log] [DEBUG] Saving user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: true, ariaSound: true, haptic: false, showExplanations: true}
[browser][log] [DEBUG][userSettings] setUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: true, ariaSound: true, haptic: false, showExplanations: true}
  ✓  68 [Desktop Chrome] › e2e/profile-update.spec.ts:16:3 › Profile Settings Persistence › can toggle dark mode and see it persist after reload (3.7s)

  ✘  79 [Desktop Chrome] › e2e/navigation-aria-flow.spec.ts:26:5 › Navigation and ARIA Accessibility Flow › Page /quiz has correct ARIA roles and keyboard navigation (858ms)
