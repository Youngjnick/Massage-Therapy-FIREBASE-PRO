
Running 180 tests using 4 workers

  -  1 [Desktop Chrome] â€º e2e/app.critical-flow.spec.ts:5:6 â€º should start quiz and focus first option
  âœ“  4 [Desktop Chrome] â€º e2e/all-interactive-aria-accessibility.spec.ts:19:5 â€º All Interactive Elements: ARIA and Keyboard Accessibility â€º All interactive elements on / have accessible names and ARIA roles (1.5s)
  âœ“  6 [Desktop Chrome] â€º e2e/all-interactive-aria-accessibility.spec.ts:19:5 â€º All Interactive Elements: ARIA and Keyboard Accessibility â€º All interactive elements on /quiz have accessible names and ARIA roles (778ms)
  âœ“  7 [Desktop Chrome] â€º e2e/all-interactive-aria-accessibility.spec.ts:19:5 â€º All Interactive Elements: ARIA and Keyboard Accessibility â€º All interactive elements on /achievements have accessible names and ARIA roles (736ms)
  âœ“  5 [Desktop Chrome] â€º e2e/app.spec.ts:3:1 â€º should reset quiz and focus first option after restart (3.6s)
  âœ“  8 [Desktop Chrome] â€º e2e/all-interactive-aria-accessibility.spec.ts:19:5 â€º All Interactive Elements: ARIA and Keyboard Accessibility â€º All interactive elements on /analytics have accessible names and ARIA roles (625ms)
  âœ“  9 [Desktop Chrome] â€º e2e/app.spec.ts:21:1 â€º should handle edge case: no questions (710ms)
  âœ“  3 [Desktop Chrome] â€º e2e/aria-roles-labels.spec.ts:31:3 â€º Accessibility: ARIA roles and labels â€º Main navigation and buttons have correct ARIA roles and labels (4.4s)
  âœ“  10 [Desktop Chrome] â€º e2e/all-interactive-aria-accessibility.spec.ts:19:5 â€º All Interactive Elements: ARIA and Keyboard Accessibility â€º All interactive elements on /profile have accessible names and ARIA roles (802ms)
  âœ“  13 [Desktop Chrome] â€º e2e/assets-case-sensitivity.spec.ts:11:1 â€º Badge image is served by Vite dev server (case-sensitive) (40ms)
  âœ“  14 [Desktop Chrome] â€º e2e/assets-case-sensitivity.spec.ts:17:1 â€º No case-different files in public/badges/ (5ms)
  -  15 [Desktop Chrome] â€º e2e/assets-troubleshoot.spec.ts:10:8 â€º Development Asset Troubleshooting â€º Badge image is accessible directly
  âœ“  2 [Desktop Chrome] â€º e2e/app-accessibility-full.spec.ts:45:3 â€º App Accessibility: Full Tab Order and ARIA Audit â€º Tab through all main pages and assert focus order/visibility (4.8s)
  âœ“  16 [Desktop Chrome] â€º e2e/assets-troubleshoot.spec.ts:24:3 â€º Development Asset Troubleshooting â€º App icon is accessible directly (439ms)
  âœ“  17 [Desktop Chrome] â€º e2e/app-accessibility-full.spec.ts:89:3 â€º App Accessibility: Full Tab Order and ARIA Audit â€º No missing or duplicate ARIA labels/roles on main interactive elements (614ms)
  âœ“  18 [Desktop Chrome] â€º e2e/assets-troubleshoot.spec.ts:30:3 â€º Development Asset Troubleshooting â€º Achievements page renders badge containers and images (594ms)
  âœ“  12 [Desktop Chrome] â€º e2e/aria-roles-labels.spec.ts:71:3 â€º Accessibility: ARIA roles and labels â€º Keyboard navigation: Tab through all interactive elements and ensure correct focus order (1.4s)
  âœ“  20 [Desktop Chrome] â€º e2e/assets-troubleshoot.spec.ts:45:3 â€º Development Asset Troubleshooting â€º badges.json is accessible and returns valid JSON (413ms)
PAGE CONTENT AFTER LOGIN: <!DOCTYPE html><html lang="en"><head>
  <script type="module">import { injectIntoGlobalHook } from "/@react-refresh";
injectIntoGlobalHook(window);
window.$RefreshReg$ = () => {};
window.$RefreshSig$ = () => (type) => type;</script>

  <script type="module" src="/@vite/client"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Massage Therapy Smart Study PRO</title>
  <link rel="icon" type="image/x-icon" href="/Massage-Therapy-FIREBASE-PRO/favicon.ico">
  <link rel="apple-touch-icon" href="/Massage-Therapy-FIREBASE-PRO/icon-512x512.png">
  <meta name="theme-color" content="#1e3c28">
  <script type="module" src="/src/index.tsx"></script>
<style type="text/css" data-vite-dev-id="/Users/macuser/Desktop/Massage-Therapy-FIREBASE-PRO/src/components/AppHeader.css">.app-header {
  display: flex;
  align-items: center;
  gap: 1.2rem;
  padding: 1.5rem 0 1rem 0;
  justify-content: center;
}
.app-header__icon {
  width: 48px;
  he
BROWSER CONSOLE: log [E2E DEBUG] Profile user: _UserImpl
BROWSER CONSOLE: log [DEBUG] Loading user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3
BROWSER CONSOLE: warning [2025-06-29T21:51:46.108Z]  @firebase/firestore: Firestore (11.9.0): WebChannelConnection RPC 'Listen' stream 0x1ad4b291 transport errored. Name: undefined Message: undefined
BROWSER CONSOLE: error [2025-06-29T21:51:46.110Z]  @firebase/firestore: Firestore (11.9.0): Could not reach Cloud Firestore backend. Connection failed 1 times. Most recent error: FirebaseError: [code=unavailable]: The operation could not be completed
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.
BROWSER CONSOLE: debug [vite] connecting...
BROWSER CONSOLE: debug [vite] connected.
BROWSER CONSOLE: info %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
BROWSER CONSOLE: log [DEBUG][Router] location.pathname: /profile basename: /
BROWSER CONSOLE: log [analytics] app_loaded undefined
  âœ“  22 [Desktop Chrome] â€º e2e/auth.spec.ts:5:3 â€º Authentication UI Flows â€º should show sign-in prompt on Analytics when unauthenticated (633ms)
BROWSER CONSOLE: log [E2E DEBUG] Profile user: _UserImpl
BROWSER CONSOLE: log [DEBUG] Loading user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3
  âœ“  19 [Desktop Chrome] â€º e2e/auth-session-persistence.spec.ts:18:3 â€º Auth Session Persistence â€º should persist session after reload (1.3s)
  âœ“  21 [Desktop Chrome] â€º e2e/auth-smoke.spec.ts:4:1 â€º auth smoke: can sign in and see user info (1.3s)
  âœ“  25 [Desktop Chrome] â€º e2e/badge-dynamic-behavior.spec.ts:5:1 â€º badges.json has correct criteria and image fields (28ms)
  âœ“  11 [Desktop Chrome] â€º e2e/app.spec.ts:30:1 â€º should handle edge case: rapid answer selection (3.3s)
  âœ“  26 [Desktop Chrome] â€º e2e/badge-dynamic-behavior.spec.ts:24:1 â€º badge_test image is visible and loads (656ms)
  âœ“  24 [Desktop Chrome] â€º e2e/badge-appearance.spec.ts:13:2 â€º Local badge images (UI login) â€º All key badges appear on Achievements page (1.2s)
  âœ“  23 [Desktop Chrome] â€º e2e/auth.spec.ts:10:3 â€º Authentication UI Flows â€º should show sign-in button and open popup on Profile page (1.6s)
  âœ“  28 [Desktop Chrome] â€º e2e/basic-navigation.spec.ts:13:5 â€º Basic Navigation â€º can navigate to / (674ms)
  âœ“  30 [Desktop Chrome] â€º e2e/auth.spec.ts:26:3 â€º Authentication UI Flows â€º should show sign-in button after sign out click (UI only) (579ms)
  âœ“  31 [Desktop Chrome] â€º e2e/basic-navigation.spec.ts:13:5 â€º Basic Navigation â€º can navigate to /quiz (581ms)
  âœ“  33 [Desktop Chrome] â€º e2e/basic-navigation.spec.ts:13:5 â€º Basic Navigation â€º can navigate to /analytics (587ms)
  âœ“  34 [Desktop Chrome] â€º e2e/basic-navigation.spec.ts:13:5 â€º Basic Navigation â€º can navigate to /profile (511ms)
  âœ“  27 [Desktop Chrome] â€º e2e/app.spec.ts:42:1 â€º should show explanations when enabled (2.8s)
  âœ“  29 [Desktop Chrome] â€º e2e/critical-edge-accessibility.spec.ts:4:3 â€º Critical Quiz Edge Cases and Accessibility â€º Partial answers: finish quiz with unanswered questions (2.9s)
  -  37 [Desktop Chrome] â€º e2e/critical-edge-accessibility.spec.ts:22:8 â€º Critical Quiz Edge Cases and Accessibility â€º Network failure: loading questions
  âœ“  32 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:4:3 â€º Critical UI and Accessibility Scenarios â€º Mobile viewport: quiz UI, results, and modals are visible and usable (3.5s)
  âœ“  35 [Desktop Chrome] â€º e2e/edge-accessibility.spec.ts:4:3 â€º Quiz Edge Cases and Accessibility â€º Quiz with all options disabled: keyboard navigation skips disabled (2.8s)
  âœ“  39 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:25:3 â€º Critical UI and Accessibility Scenarios â€º Badge modals: only one open at a time, keyboard accessible (781ms)
  âœ“  36 [Desktop Chrome] â€º e2e/app.spec.ts:51:1 â€º should show topic stats in results (3.1s)
  âœ“  41 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:45:3 â€º Critical UI and Accessibility Scenarios â€º Badge modal: open with keyboard only (Tab + Enter/Space) (634ms)
  âœ“  38 [Desktop Chrome] â€º e2e/critical-edge-accessibility.spec.ts:35:3 â€º Critical Quiz Edge Cases and Accessibility â€º ARIA attributes: quiz options and navigation (3.1s)
  âœ“  40 [Desktop Chrome] â€º e2e/edge-accessibility.spec.ts:21:3 â€º Quiz Edge Cases and Accessibility â€º Badge modal: opens and fallback image appears if missing (965ms)
  âœ“  44 [Desktop Chrome] â€º e2e/critical-edge-accessibility.spec.ts:57:3 â€º Critical Quiz Edge Cases and Accessibility â€º Badges: tab, open with Enter/Space, close with Escape, focus returns (716ms)
  âœ“  42 [Desktop Chrome] â€º e2e/app.spec.ts:63:1 â€º should render and be usable on mobile viewport (2.8s)
  âœ“  47 [Desktop Chrome] â€º e2e/app.spec.ts:73:1 â€º should load all referenced badge images on Achievements page (554ms)
  âœ“  46 [Desktop Chrome] â€º e2e/finish-quiz-buttons.spec.ts:4:3 â€º Finish and Finish Quiz Buttons â€º completes quiz and shows results with Finish button (2.7s)
  âœ“  48 [Desktop Chrome] â€º e2e/app.spec.ts:91:1 â€º should show fallback badge image if badge image fails to load (667ms)
  -  50 [Desktop Chrome] â€º e2e/app.spec.ts:122:6 â€º should load favicon, app icon, and default avatar image
  âœ“  51 [Desktop Chrome] â€º e2e/app.spec.ts:149:1 â€º should navigate to all main pages via NavBar and route correctly (1.2s)
  âœ“  43 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:60:3 â€º Critical UI and Accessibility Scenarios â€º Next button: always rendered, but hidden or disabled as appropriate (5.3s)
  âœ“  45 [Desktop Chrome] â€º e2e/edge-accessibility.spec.ts:40:3 â€º Quiz Edge Cases and Accessibility â€º Tab order: all interactive elements are reachable (5.8s)
  -  54 [Desktop Chrome] â€º e2e/edge-accessibility.spec.ts:55:8 â€º Quiz Edge Cases and Accessibility â€º Screen reader text: ARIA labels and roles
  âœ“  49 [Desktop Chrome] â€º e2e/finish-quiz-buttons.spec.ts:19:3 â€º Finish and Finish Quiz Buttons â€º shows Finish Quiz button and works as expected (2.6s)
Number of topic options: [33m482[39m
  âœ“  53 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:75:3 â€º Critical UI and Accessibility Scenarios â€º Quiz cannot be started without required fields (2.5s)
  âœ“  52 [Desktop Chrome] â€º e2e/app.spec.ts:188:1 â€º should not submit answer when using arrow keys (only change selection) (3.3s)
  âœ“  57 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:111:3 â€º Critical UI and Accessibility Scenarios â€º Badge modal fallback image and keyboard navigation (727ms)
  âœ“  59 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:127:3 â€º Critical UI and Accessibility Scenarios â€º Network failure: badge load (525ms)
  âœ“  56 [Desktop Chrome] â€º e2e/keyboard-navigation-and-restart.spec.ts:4:3 â€º Keyboard-Only Navigation and Quiz Restart â€º Complete a quiz using direct element selection/clicks (3.1s)
  âœ“  55 [Desktop Chrome] â€º e2e/edge-accessibility.spec.ts:77:3 â€º Quiz Edge Cases and Accessibility â€º Mobile viewport: quiz, results, achievements (3.4s)
  âœ“  62 [Desktop Chrome] â€º e2e/login-flow.spec.ts:5:3 â€º Sign In Flow (UI) â€º shows sign-in prompt when not authenticated (599ms)
  âœ“  63 [Desktop Chrome] â€º e2e/login-flow.spec.ts:11:3 â€º Sign In Flow (UI) â€º signs in with test form and shows user profile (1.2s)
  âœ“  58 [Desktop Chrome] â€º e2e/app.spec.ts:211:1 â€º arrow keys: wrap-around, skip disabled, and maintain selection state (3.7s)
  âœ“  60 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:133:3 â€º Critical UI and Accessibility Scenarios â€º Accessibility: ARIA roles and labels (2.8s)
  -  66 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:156:8 â€º Critical UI and Accessibility Scenarios â€º Tab order is logical for quiz controls
  âœ“  64 [Desktop Chrome] â€º e2e/login-flow.spec.ts:19:3 â€º Sign In Flow (UI) â€º signs out and returns to guest state (1.2s)
  âœ“  61 [Desktop Chrome] â€º e2e/keyboard-navigation-and-restart.spec.ts:22:3 â€º Keyboard-Only Navigation and Quiz Restart â€º Quiz restart resets all state and focus (3.2s)

  âœ˜  69 [Desktop Chrome] â€º e2e/navigation-aria-flow.spec.ts:26:5 â€º Navigation and ARIA Accessibility Flow â€º Page / has correct ARIA roles and keyboard navigation (638ms)

  âœ“  67 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:169:3 â€º Critical UI and Accessibility Scenarios â€º Mobile viewport: quiz and results are usable (3.0s)
  -  71 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:181:8 â€º Critical UI and Accessibility Scenarios â€º Quiz stepper: skip, revisit, answer in any order
  -  72 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:200:8 â€º Critical UI and Accessibility Scenarios â€º Error boundary: UI does not crash on JS error in quiz
  âœ˜  70 [Desktop Chrome] â€º e2e/navigation-aria-flow.spec.ts:26:5 â€º Navigation and ARIA Accessibility Flow â€º Page / has correct ARIA roles and keyboard navigation (retry #1) (608ms)
  âœ“  65 [Desktop Chrome] â€º e2e/app.spec.ts:253:1 â€º up/down arrow keys only cycle focus on answer options, never advance quiz card (3.6s)
  âœ“  73 [Desktop Chrome] â€º e2e/critical-ui-accessibility.spec.ts:207:3 â€º Critical UI and Accessibility Scenarios â€º Badge modal: top-right close button closes modal (710ms)
  -  75 [Desktop Chrome] â€º e2e/quiz-autosave-partial-results.spec.ts:6:8 â€º Quiz Auto-Save and Resume â€º Auto-saves progress for guest (localStorage) and resumes on reload
  -  76 [Desktop Chrome] â€º e2e/quiz-autosave-partial-results.spec.ts:26:8 â€º Quiz Auto-Save and Resume â€º Shows cancel/exit confirmation dialog when leaving quiz
  -  77 [Desktop Chrome] â€º e2e/quiz-autosave-partial-results.spec.ts:43:8 â€º Quiz Partial Results â€º Shows partial results and highlights unanswered questions
[browser][debug] [vite] connecting...
[browser][debug] [vite] connected.
[browser][info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[browser][log] [DEBUG][Router] location.pathname: /profile basename: /
[browser][log] [analytics] app_loaded undefined
[browser][log] [E2E DEBUG] Profile user: null
[browser][log] [E2E DEBUG] Profile user: _UserImpl
[browser][log] [DEBUG] Loading user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3
[browser][log] [DEBUG][userSettings] getUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {email: test1234@gmail.com, showExplanations: true, ariaSound: true, darkMode: false, haptic: false}
[browser][log] [DEBUG] Loaded settings: {email: test1234@gmail.com, showExplanations: true, ariaSound: true, darkMode: false, haptic: false}
[browser][log] [DEBUG] Saving user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: false, ariaSound: true, haptic: false, showExplanations: true}
[browser][log] [DEBUG][userSettings] setUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: false, ariaSound: true, haptic: false, showExplanations: true}
[browser][log] [DEBUG] Saving user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: true, ariaSound: true, haptic: false, showExplanations: true}
[browser][log] [DEBUG][userSettings] setUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: true, ariaSound: true, haptic: false, showExplanations: true}
[browser][debug] [vite] connecting...
[browser][debug] [vite] connected.
[browser][info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[browser][log] [DEBUG][Router] location.pathname: /profile basename: /
[browser][log] [analytics] app_loaded undefined
[browser][log] [E2E DEBUG] Profile user: _UserImpl
[browser][log] [DEBUG] Loading user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3
[browser][log] [DEBUG][userSettings] getUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {haptic: false, email: test1234@gmail.com, showExplanations: true, darkMode: true, ariaSound: true}
[browser][log] [DEBUG] Loaded settings: {haptic: false, email: test1234@gmail.com, showExplanations: true, darkMode: true, ariaSound: true}
[browser][log] [DEBUG] Saving user settings for: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: true, ariaSound: true, haptic: false, showExplanations: true}
[browser][log] [DEBUG][userSettings] setUserSettings: 0wTE0Hy8n8Y3aFxQaLRibyaXYKF3 {darkMode: true, ariaSound: true, haptic: false, showExplanations: true}
  âœ“  68 [Desktop Chrome] â€º e2e/profile-update.spec.ts:16:3 â€º Profile Settings Persistence â€º can toggle dark mode and see it persist after reload (3.7s)

  âœ˜  79 [Desktop Chrome] â€º e2e/navigation-aria-flow.spec.ts:26:5 â€º Navigation and ARIA Accessibility Flow â€º Page /quiz has correct ARIA roles and keyboard navigation (858ms)
